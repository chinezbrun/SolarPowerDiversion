# THIS IS THE CONFIGURATION FILE FOR PowerDiversion script
# lines with "#" are used only for comments 

#--------------------------------------------------------------------
[boiler]
# activate this section ONLY if monitoring system is setup as per script requirements
# boiler_temp_active  # default = false --true if boiler temperature sensor is installed and monitoring system is in place and save data to common folder
# boiler_temp_ref     # default= 70   --max boiler temperature to stop diversion
# deltatime_ref       # default= 900 --max time in seconds to stop diversion due to no temperature data 

boiler_temp_active  =true
boiler_temp_ref     =65
deltatime_ref       =900

#--------------------------------------------------------------------
[solarpower]
# loop_ref             # default = 10 numbers of loops until averages are calculated
# voltage_ref          # default = 53 --used in decision to activate AC diversion; Load 1-3 (to be compensated with temp)
# voltage_compensated  # default = true --if true voltage_ref will be temperature compensated with +/- 0.12v/grade @25grd
# max_ac_out_pwr       # default = 2500 / inverter -- used to protect inverters for extra loads; above this power AC diversion is stopped
# divert_pwr_ref_01    # default = 1000 -- max diverted DC power to activate AC load 01 relay
# divert_pwr_ref_02    # default = 1000 -- max diverted DC power to activate AC load 02 relay
# divert_pwr_ref_03    # default = 1000 -- max diverted DC power to activate AC load 03 relay
# min_sell_pwr         # default = 500  -- min power to be sold to grid; below this power AC diversion is stopped in SELL mode  
# chargers_PV_ref      # default = 90 -- used to activate AC load 01 relay(GPIO) when no DC diverted power info available (i.e forced)
# divert_by_state      # default = false -- if true charger state is used if false baterry_voltage ref is used to activate DC diversion relay
# push_notification    # default = false -- if true push notification is send to android/iphone - PushBullet app should be installed and configured
# push_api_token       # api_token key is generated by Pushover app 
# push_user_key        # user_key is generated by Pushover app
# soc_min_limit        # default = 60 --min SOC used to activate the relay (GPIO) to stop level 1 utilities - restauration level SOC_min +5
# InOutDataPath        # location for input output data (status.json, logs, temp file)                                      
# grid_connect         # label used during various decision --should be identical with value provided by your device json file (i.e AC Use)
# grid_droped          # label used during various decision --should be identical with value provided by your device json file
# floating             # label used during various decision --should be identical with value provided by your device json file 
# absorbtion           # label used during various decision --should be identical with value provided by your device json file
# equalize             # label used during various decision --should be identical with value provided by your device json file


loop_ref            =10
voltage_ref         =53
voltage_compensated =false
max_ac_out_pwr      =5000
divert_pwr_ref_01   =1000
divert_pwr_ref_02   =900
divert_pwr_ref_03   =900
min_sell_pwr        =500    
chargers_PV_ref     =95
divert_by_state     =true
push_notificaton	=true
push_api_token		=axo6n59mumue9bhwzxa5dafbsm9u42
push_user_key		=u55o3c5wsbtgkwmbdft1mopg9ia5aw
soc_min_limit       =55
InOutDataPath      =/mnt/web/MonitorMate_mod/WebServer/data/
grid_connect        =AC Use
grid_droped         =AC Drop
floating            =Float
absorbtion          =Absorb
equalize            =Equalize

[port_map]
# used to have the mapping of the devices on ports
# used to detect eventual abnormalities
# inverter code 5
# chargers code 3
# FNDC     code 4

port0 = comm
port1 = 5
port2 = none
port3 = 3
port4 = 3
port5 = 4
port6 = none
port7 = none
port8 = none
port9 = none

[MQTT]
# settings for MQTT to be used for Home Assistant transmission -- set false if not used
# active MQTT topics:
# 'home-assistant/solar/power_diversion_uptime' --uptime of the python script
# 'home-assistant/solar/zamel/1'                --state of AC load 1 relay
# 'home-assistant/solar/zamel/2'                --state of AC load 2 relay
# 'home-assistant/solar/22'                     --state of DC divert relay
# 'home-assistant/solar/23'                     --state of stop U/P relay

MQTT_active     =true
MQTT_broker     =192.168.0.100
#MQTT_port      =
MQTT_topic1     = home-assistant/solar/power_diversion_uptime
MQTT_topic2     = home-assistant/solar/power_diversion_load_ac1
MQTT_topic3     = home-assistant/solar/power_diversion_load_ac2
MQTT_topic4     = home-assistant/solar/power_diversion_divert_dc
MQTT_topic5     = home-assistant/solar/power_diversion_stop_up
MQTT_topic6     = home-assistant/solar/power_diversion_load_ac3
MQTT_topic7     = none
MQTT_topic8     = none

